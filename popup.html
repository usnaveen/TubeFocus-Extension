<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>TUBE FOCUS</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header & Toggles -->
    <header>
      <div class="header-left vertical-stack">
        <span>TUBE</span>
        <span>FOCUS</span>
      </div>
      <!-- Timer Display (Digital Clock Style) -->
      <div class="timer-container">
        <span id="timerDisplay" class="digital-timer">‚è≥</span>
      </div>
      <div class="toggles">
        <button id="toggleOn" class="active">On</button>
        <button id="toggleOff" class="active">Off</button>
      </div>
    </header>

    <!-- Tabs -->
    <nav class="tabs">
      <button data-tab="setup"  class="active">Setup</button>
      <button data-tab="current">Current</button>
      <button data-tab="history">History</button>
      <button data-tab="summary">Summary</button>
    </nav>

    <!-- Setup -->
    <section id="setup" class="active">
      <label for="goalInput">  Define your goal in detail:</label>
      <input type="text" id="goalInput" placeholder="e.g. Learn React component lifecycle">
      <label for="sessionDuration">Session duration (minutes):</label>
      <input type="number" id="sessionDuration" min="1" value="25">
      
      <label for="scoreModeDropdown">Scoring Mode:</label>
      <div class="dropdown-container">
        <button id="scoreModeBtn" class="scoring-mode-btn">
          <span id="scoreModeText">Simple: Title + Description</span>
          <span class="arrow">‚ñº</span>
        </button>
        <div id="scoreModeDropdown" class="dropdown-menu">
          <div class="dropdown-section">
            <div class="dropdown-header">Simple Mode</div>
            <div class="dropdown-option" data-type="simple" data-mode="title_only">
              <span class="option-label">Title Only</span>
              <span class="option-desc">Fastest scoring using only video title</span>
            </div>
            <div class="dropdown-option" data-type="simple" data-mode="title_and_description">
              <span class="option-label">Title + Description</span>
              <span class="option-desc">Standard scoring with full description</span>
            </div>
            <div class="dropdown-option" data-type="simple" data-mode="title_and_clean_desc">
              <span class="option-label">Title + Clean Description</span>
              <span class="option-desc">Smart filtering of description noise</span>
            </div>
          </div>
          <div class="dropdown-section">
            <div class="dropdown-header">Advanced Mode</div>
            <div class="dropdown-option" data-type="advanced" data-mode="title">
              <span class="option-label">Title Only</span>
              <span class="option-desc">Advanced analysis of video title</span>
            </div>
            <div class="dropdown-option" data-type="advanced" data-mode="title,description">
              <span class="option-label">Title + Description</span>
              <span class="option-desc">Advanced analysis of title and description</span>
            </div>
            <div class="dropdown-option" data-type="advanced" data-mode="title,description,tags">
              <span class="option-label">Title + Description + Tags</span>
              <span class="option-desc">Multi-factor analysis with tags</span>
            </div>
            <div class="dropdown-option" data-type="advanced" data-mode="title,description,tags,category">
              <span class="option-label">All Factors</span>
              <span class="option-desc">Complete analysis (title, description, tags, category)</span>
            </div>
          </div>
        </div>
      </div>
      
      <button id="startSession" class="action">Start Session</button>
      <button id="stopSession"  class="action" disabled>Stop Session</button>
    </section>

    <!-- Current -->
    <section id="current">
      <div class="stats-container">
        <h3>Session Stats</h3>
        <div class="stat-row">
          <span class="stat-label">Videos Watched:</span>
          <span id="videosWatched" class="stat-value">0</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Average Score:</span>
          <span id="averageScore" class="stat-value">‚Äì</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Current Video:</span>
          <span id="currentScore" class="stat-value">‚Äì</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Session Status:</span>
          <span id="sessionStatus" class="stat-value status-indicator">‚óè</span>
        </div>
      </div>
      
      <button id="refocusButton" class="action refocus-btn" style="margin-top: 16px;">
        <span>üéØ Refocus Session</span>
      </button>
      <p style="font-size: 0.85em; color: #999; margin-top: 8px; text-align: center;">
        Feeling distracted? Click to get back on track!
      </p>
      
      <!-- Save Video to Library -->
      <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border);">
        <button id="saveVideoButton" class="action" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
          <span>üìö Save Video to Library</span>
        </button>
        <p style="font-size: 0.85em; color: #999; margin-top: 8px; text-align: center;">
          Extract transcript and save for later search
        </p>
        <div id="saveVideoStatus" style="font-size: 0.8em; text-align: center; margin-top: 8px; color: #999;"></div>
      </div>
    </section>

    <!-- History -->
    <section id="history">
      <div class="history-container">
        <h3>üìö Video Library</h3>
        <p style="font-size: 0.85em; color: #999; margin-bottom: 12px;">
          Search through your watched videos
        </p>
        
        <div class="search-box">
          <input 
            type="text" 
            id="historySearch" 
            placeholder="Search for topics, concepts..." 
            style="width: 100%; padding: 8px; border-radius: 4px; border: 2px solid var(--border); background: var(--panel); color: var(--text); font-size: 13px;"
          />
          <button id="searchButton" class="action" style="margin-top: 8px; width: 100%;">
            üîç Search History
          </button>
        </div>
        
        <div id="searchResults" style="margin-top: 16px;">
          <div style="text-align: center; color: #999; font-size: 0.9em;">
            Enter a search query to find videos
          </div>
        </div>
        
        <div id="librarianStats" style="margin-top: 16px; padding: 12px; background: var(--panel); border-radius: 6px; border: 1px solid var(--border); font-size: 0.85em;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
            <span>Indexed Videos:</span>
            <span id="indexedCount">‚Äî</span>
          </div>
          <div style="display: flex; justify-content: space-between;">
            <span>Total Chunks:</span>
            <span id="chunksCount">‚Äî</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Summary -->
    <section id="summary">
      <h2>Session Summary</h2>
      <div id="summaryMessage"></div>
      <canvas id="scoreChart" width="240" height="120"></canvas>
    </section>

    <!-- Settings -->
    <section id="settings">
      <div class="settings-header">
        <button id="backToMain" class="back-button">
          <svg fill="currentColor" height="20px" width="20px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <g>
              <g>
                <path d="M441.751,475.584L222.166,256L441.75,36.416c6.101-6.101,7.936-15.275,4.629-23.253C443.094,5.184,435.286,0,426.667,0 H320.001c-5.675,0-11.093,2.24-15.083,6.251L70.251,240.917c-8.341,8.341-8.341,21.824,0,30.165l234.667,234.667 c3.989,4.011,9.408,6.251,15.083,6.251h106.667c8.619,0,16.427-5.184,19.712-13.163 C449.687,490.858,447.852,481.685,441.751,475.584z"/>
              </g>
            </g>
          </svg>
        </button>
        <h2>Settings</h2>
      </div>
      
      <!-- Theme Selection -->
      <div class="settings-row">
        <div>
          <span style="font-weight:bold;">Theme</span>
          <div style="font-size:0.9em; color:#ccc; margin-top:0.2em;">Choose your preferred color scheme</div>
        </div>
        <select id="themeSelector" class="theme-selector">
          <option value="crimson-vanilla">Crimson Flame & Vanilla Cream</option>
          <option value="vanilla-crimson">Vanilla Cream & Crimson Flame</option>
          <option value="darkreader">Darkreader Theme</option>
          <option value="cocoa-lemon">Cocoa Brown & Lemon Zest</option>
          <option value="golden-ocean">Golden Honey & Ocean Depths</option>
          <option value="dusty-apricot">Dusty Teal & Pale Apricot</option>
          <option value="spiced-forest">Spiced Orange & Deep Forest</option>
        </select>
      </div>
      
      <div class="settings-row">
        <div>
          <span style="font-weight:bold;">Share Session History</span>
          <div style="font-size:0.9em; color:#ccc; margin-top:0.2em;">Allow the extension to upload your session history to the cloud for analysis.</div>
        </div>
        <label class="ios-switch">
          <input type="checkbox" id="shareHistoryToggle" />
          <span class="slider"></span>
        </label>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <span>Meet the Creator</span>
      <img id="settingsIcon" class="settings-icon" src="Settings.svg" alt="Settings" title="Settings" />
    </footer>
  </div>



  <!-- Chart.js library -->
  <script src="libs/chart.min.js"></script>
  <script src="popup.js"></script>
</body>
</html>
