<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>TUBE FOCUS</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="popup-container">
    <!-- Header & Toggles -->
    <header>
      <div class="header-left vertical-stack">
        <span>TUBE</span>
        <span>FOCUS</span>
      </div>
      <!-- Timer Display (Digital Clock Style) -->
      <div class="timer-container">
        <span id="timerDisplay" class="digital-timer">‚è≥</span>
      </div>
      <div class="toggles">
        <button id="toggleOn" class="active">On</button>
        <button id="toggleOff" class="active">Off</button>
      </div>
    </header>

    <!-- Tabs -->
    <nav class="tabs">
      <button data-tab="setup" class="active">Setup</button>
      <button data-tab="current">Current</button>
      <button data-tab="summary">Summary</button>
    </nav>

    <div style="padding: 0 0.5rem; margin-top: 0.5rem;">
      <button id="openDashboard"
        style="width: 100%; border: 2px solid var(--accent); background: transparent; color: var(--text); padding: 0.5rem; border-radius: 4px; cursor: pointer; font-weight: bold; font-family: inherit; font-size: 0.85rem; opacity: 0.9;">
        Open Focus Hub ‚Üó
      </button>
    </div>

    <!-- Setup -->
    <section id="setup" class="active">
      <label for="goalInput"> Define your goal in detail:</label>
      <input type="text" id="goalInput" placeholder="e.g. Learn React component lifecycle">
      <label for="sessionDuration">Session duration (minutes):</label>
      <input type="number" id="sessionDuration" min="1" value="25">

      <!-- Coach Instructions -->
      <label for="coachMode">Coach Mode:</label>
      <select id="coachMode" class="coach-mode-select">
        <option value="balanced">üéØ Balanced (Default)</option>
        <option value="strict">üö´ Strict - No distractions allowed</option>
        <option value="relaxed">üòå Relaxed - Allow some leisure</option>
        <option value="custom">‚öôÔ∏è Custom instructions</option>
      </select>

      <div id="customInstructionsContainer" style="display: none; margin-top: 8px;">
        <textarea id="coachInstructions"
          placeholder="e.g., Allow gaming videos for 10 min breaks, remind me to stretch every 30 min..."
          style="width: 100%; min-height: 60px; padding: 8px; border-radius: 4px; border: 2px solid var(--border); background: var(--panel); color: var(--text); font-size: 12px; resize: vertical;"></textarea>
      </div>

      <button id="startSession" class="action">Start Session</button>
      <button id="stopSession" class="action" disabled>Stop Session</button>
    </section>

    <!-- Current -->
    <section id="current">
      <div class="stats-container">
        <h3>üìä Session Stats</h3>
        <div class="stat-row">
          <span class="stat-label">Videos Watched:</span>
          <span id="videosWatched" class="stat-value">0</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Average Score:</span>
          <span id="averageScore" class="stat-value">‚Äì</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Current Video:</span>
          <span id="currentScore" class="stat-value">‚Äì</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Watch Time:</span>
          <span id="watchTime" class="stat-value">0m</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Session Status:</span>
          <span id="sessionStatus" class="stat-value status-indicator">‚óè</span>
        </div>
      </div>

      <!-- Coach Message -->
      <div id="coachMessage" class="coach-message"
        style="margin-top: 16px; padding: 12px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%); border-radius: 8px; border-left: 3px solid #667eea; display: none;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
          <span style="font-size: 1.2em;">üß†</span>
          <span style="font-weight: bold; color: #667eea;">AI Coach</span>
        </div>
        <p id="coachText" style="margin: 0; font-size: 0.9em; color: var(--text);"></p>
      </div>

      <!-- Video Actions -->
      <div style="margin-top: 16px; display: flex; gap: 8px;">
        <button id="saveVideoButton" class="action"
          style="flex: 1; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); font-size: 0.85em; padding: 10px;">
          <span>üìö Save to Library</span>
        </button>
        <button id="highlightButton" class="action"
          style="flex: 1; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); font-size: 0.85em; padding: 10px;">
          <span>‚ú® Highlight Section</span>
        </button>
      </div>
      <div id="saveVideoStatus" style="font-size: 0.8em; text-align: center; margin-top: 8px; color: #999;"></div>
    </section>

    <!-- History removed (moved to Focus Hub) -->

    <!-- Summary -->
    <section id="summary">
      <h2>Session Summary</h2>
      <div id="summaryMessage"></div>
      <canvas id="scoreChart" width="240" height="120"></canvas>
    </section>

    <!-- Settings -->
    <section id="settings">
      <div class="settings-header">
        <button id="backToMain" class="back-button">
          <svg fill="currentColor" height="20px" width="20px" version="1.1" xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512">
            <g>
              <g>
                <path
                  d="M441.751,475.584L222.166,256L441.75,36.416c6.101-6.101,7.936-15.275,4.629-23.253C443.094,5.184,435.286,0,426.667,0 H320.001c-5.675,0-11.093,2.24-15.083,6.251L70.251,240.917c-8.341,8.341-8.341,21.824,0,30.165l234.667,234.667 c3.989,4.011,9.408,6.251,15.083,6.251h106.667c8.619,0,16.427-5.184,19.712-13.163 C449.687,490.858,447.852,481.685,441.751,475.584z" />
              </g>
            </g>
          </svg>
        </button>
        <h2>Settings</h2>
      </div>

      <!-- Theme Selection -->
      <div class="settings-row">
        <div>
          <span style="font-weight:bold;">Theme</span>
          <div style="font-size:0.9em; color:#ccc; margin-top:0.2em;">Choose your preferred color scheme</div>
        </div>
        <select id="themeSelector" class="theme-selector">
          <option value="crimson-vanilla">Crimson Flame & Vanilla Cream</option>
          <option value="vanilla-crimson">Vanilla Cream & Crimson Flame</option>
          <option value="darkreader">Darkreader Theme</option>
          <option value="cocoa-lemon">Cocoa Brown & Lemon Zest</option>
          <option value="golden-ocean">Golden Honey & Ocean Depths</option>
          <option value="dusty-apricot">Dusty Teal & Pale Apricot</option>
          <option value="spiced-forest">Spiced Orange & Deep Forest</option>
        </select>
      </div>

      <div class="settings-row">
        <div>
          <span style="font-weight:bold;">Share Session History</span>
          <div style="font-size:0.9em; color:#ccc; margin-top:0.2em;">Allow the extension to upload your session history
            to the cloud for analysis.</div>
        </div>
        <label class="ios-switch">
          <input type="checkbox" id="shareHistoryToggle" />
          <span class="slider"></span>
        </label>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <span>Meet the Creator</span>
      <img id="settingsIcon" class="settings-icon" src="Settings.svg" alt="Settings" title="Settings" />
    </footer>
  </div>



  <!-- Chart.js library -->
  <script src="libs/chart.min.js"></script>
  <script src="popup.js"></script>
</body>

</html>